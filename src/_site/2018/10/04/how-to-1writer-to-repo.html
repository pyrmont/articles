<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>How-To: Push to a Git Repo from 1Writer | articles.inqk.net</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="How-To: Push to a Git Repo from 1Writer" />
<meta name="author" content="Michael Camilleri" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Instructions on how to configure 1Writer to push to a Git repository." />
<meta property="og:description" content="Instructions on how to configure 1Writer to push to a Git repository." />
<link rel="canonical" href="http://localhost:4000/2018/10/04/how-to-1writer-to-repo.html" />
<meta property="og:url" content="http://localhost:4000/2018/10/04/how-to-1writer-to-repo.html" />
<meta property="og:site_name" content="articles.inqk.net" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-10-04T08:19:05+09:00" />
<script type="application/ld+json">
{"dateModified":"2018-10-04T08:23:15+09:00","datePublished":"2018-10-04T08:19:05+09:00","headline":"How-To: Push to a Git Repo from 1Writer","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2018/10/04/how-to-1writer-to-repo.html"},"author":{"@type":"Person","name":"Michael Camilleri"},"description":"Instructions on how to configure 1Writer to push to a Git repository.","url":"http://localhost:4000/2018/10/04/how-to-1writer-to-repo.html","@type":"BlogPosting","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="/assets/css/style.css?v=2daa2b27c8b7174fdff1f614d852c8ece5845587">
    <link rel="stylesheet" href="/assets/css/barefoot.min.css?v=2daa2b27c8b7174fdff1f614d852c8ece5845587">
    <link rel="alternate" type="application/atom+xml" href="/feed.xml" />

    <link rel="shortcut icon" href="/assets/icons/favicon.ico?v=2daa2b27c8b7174fdff1f614d852c8ece5845587" />
    <link rel="icon" type="image/png" href="/assets/icons/favicon-196.png?v=2daa2b27c8b7174fdff1f614d852c8ece5845587" sizes="196x196">
    <link rel="apple-touch-icon image_src" href="/assets/icons/apple-touch-icon.png?v=2daa2b27c8b7174fdff1f614d852c8ece5845587">

    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header class="post">
        <a href="http://localhost:4000"> <h1>&#10042; articles.inqk.net</h1> </a>
        <p>Usually more extended thoughts by <a href="https://inqk.net/">Michael Camilleri</a>.
</p>
        <p class="instructions">Read <a href="/instructions.html">how</a> to use this blog.</p>
      </header>

<section class="post">
  <div class="tldr">
    <div class="heading">TLDR</div>
    <p>Instructions on how to configure 1Writer to push to a Git repository.</p>

  </div>

  <article>
    <h1>How‑To: Push to a Git Repo from 1Writer
</h1>

    <div class="metadata">
      <time datetime="2018-10-04 08:19:05 +0900">4 October 2018</time>
      <span class="history"><a href="https://github.com/pyrmont/articles/commits/master/_posts/2018-10-04-how-to-1writer-to-repo.md">Revision History</a></span>
    </div>

    <p>One of the things that got me blogging again was finding a workflow that enabled me to publish posts to Jekyll from my phone.<span class="connector">&#65279;<sup class="footnote-ref"><a href="#fn1" id="fnref1">1</a></sup></span> I intend to write a larger how-to explaining that process in detail but, for the purposes of this article, let’s look at how we can take a text file from 1Writer and push it to a remote Git repository.</p>
<h2>Steps</h2>
<h3>Step 1. Get the Tools</h3>
<p>First, let’s introduce the software:</p>
<ul>
<li><a href="http://1writerapp.com/">1Writer</a> is a scriptable text editor for iOS. It supports the <code>x-callback-url</code> protocol and can execute user-defined ‘actions’ (scripts written in JavaScript). It’s <a href="https://itunes.apple.com/us/app/1writer-markdown-text-editor/id680469088">available on the App Store</a> for a one-time purchase of $4.99.</li>
</ul>
<ul>
<li><a href="https://workingcopyapp.com/">Working Copy</a> is a full-featured Git client for iOS. It supports the <code>x-callback-url</code> protocol. It’s <a href="https://itunes.apple.com/us/app/working-copy/id896694807">available on the App Store</a> as a free download with an in-app purchase of $15.99 to unlock its pro features.</li>
</ul>
<p>I’ll be using GitHub as the repository hosting provider but feel free to switch that out for your preferred host.</p>
<h3>Step 2. Configure Working Copy</h3>
<p>Once you’ve got the apps, you need to connect Working Copy to your remote repository. From the main ‘Repositories’ screen, tap the <code>+</code> button in the top-right and choose ‘Clone Repository’. Follow the steps and clone the repository onto your iOS device.</p>
<h3>Step 3. Collect Necessary Information</h3>
<p>In order for 1Writer to ‘talk’ to Working Copy, we need to collect three pieces of information:</p>
<ol>
<li>the <strong>URL key</strong>;</li>
<li>the <strong>repository name</strong>;</li>
<li>the <strong>directory path</strong> where we’ll be exporting our text files.</li>
</ol>
<p>The URL key can be found by opening Working Copy, tapping on the ‘gear’ icon in the top left from the ‘Repositories’ screen, tapping ‘App Integrations’ and noting the key listed.</p>
<p>The repository name is, as you might expect, the name of the repository. If you’ve cloned a GitHub repository as I did, by default it will be the name of the repo on GitHub.</p>
<p>The directory path is the path where you want to export your text files. If you’re exporting to a Jekyll repository as I am, it’ll probably be <code>_posts</code>.</p>
<h3>Step 4. Add the Action to 1Writer</h3>
<p>To add an action to 1Writer, start a text file, hide the keyboard and then tap the three-dot widget in the bottom-left of the screen.</p>
<p>This opens the ‘Action’ screen. In the top-right, tapping the <code>+</code> button will open a menu with three options; one of which is ‘Add a JavaScript Action’. Tap this.</p>
<p>You can give your action whatever name you like. I call mine ‘Publish Article’ but you might prefer something more literal like ‘Push to Repo’. You can choose an icon or leave it as the default. Similarly, you can provide an explanation of the action if you wish. All of these elements can be edited later.</p>
<p>Next, tap ‘Edit Script’. This will open the script editor. Now it’s time to copy and paste.</p>
<pre class="code highlight language-javascript"><code><span class="line-1"><span class="c1">// Main Steps</span></span>
<span class="line-2"></span>
<span class="line-3"><span class="kd">const</span> <span class="nx">key</span> <span class="o">=</span> <span class="s1">'&lt;YOUR KEY&gt;'</span></span>
<span class="line-4"><span class="kd">const</span> <span class="nx">repo</span> <span class="o">=</span> <span class="s1">'&lt;YOUR REPO&gt;'</span></span>
<span class="line-5"><span class="kd">const</span> <span class="nx">dir</span> <span class="o">=</span> <span class="s1">'&lt;YOUR PATH&gt;/'</span></span>
<span class="line-6"></span>
<span class="line-7"><span class="nx">process</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">repo</span><span class="p">,</span> <span class="nx">dir</span><span class="p">)</span></span>
<span class="line-8"></span>
<span class="line-9"><span class="c1">// Function Definitions</span></span>
<span class="line-10"></span>
<span class="line-11"><span class="k">async</span> <span class="kd">function</span> <span class="nx">process</span><span class="p">(</span><span class="nx">key_name</span><span class="p">,</span> <span class="nx">repo_name</span><span class="p">,</span> <span class="nx">dir_name</span><span class="p">)</span> <span class="p">{</span></span>
<span class="line-12">  <span class="kd">let</span> <span class="nx">key</span> <span class="o">=</span> <span class="nx">key_name</span></span>
<span class="line-13">  <span class="kd">let</span> <span class="nx">repo</span> <span class="o">=</span> <span class="nx">repo_name</span></span>
<span class="line-14">  <span class="kd">let</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">dir_name</span> <span class="o">+</span> <span class="nx">editor</span><span class="p">.</span><span class="nx">getFileName</span><span class="p">()</span></span>
<span class="line-15">  <span class="kd">let</span> <span class="nx">text</span> <span class="o">=</span> <span class="nx">editor</span><span class="p">.</span><span class="nx">getText</span><span class="p">()</span></span>
<span class="line-16">  <span class="kd">let</span> <span class="nx">message</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">input_message</span><span class="p">()</span></span>
<span class="line-17"></span>
<span class="line-18">  <span class="nx">key</span> <span class="o">=</span> <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span></span>
<span class="line-19">  <span class="nx">repo</span> <span class="o">=</span> <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">repo</span><span class="p">)</span></span>
<span class="line-20">  <span class="nx">path</span> <span class="o">=</span> <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span></span>
<span class="line-21">  <span class="nx">text</span> <span class="o">=</span> <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span></span>
<span class="line-22">  <span class="nx">message</span> <span class="o">=</span> <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span></span>
<span class="line-23"></span>
<span class="line-24">  <span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="s2">`working-copy://x-callback-url/chain?key=</span><span class="p">${</span><span class="nx">key</span><span class="p">}</span><span class="s2">&amp;repo=</span><span class="p">${</span><span class="nx">repo</span><span class="p">}</span><span class="s2">&amp;command=pull&amp;command=write&amp;path=</span><span class="p">${</span><span class="nx">path</span><span class="p">}</span><span class="s2">&amp;text=</span><span class="p">${</span><span class="nx">text</span><span class="p">}</span><span class="s2">&amp;command=commit&amp;message=</span><span class="p">${</span><span class="nx">message</span><span class="p">}</span><span class="s2">&amp;command=push&amp;x-success=onewriter://return/`</span></span>
<span class="line-25"></span>
<span class="line-26">  <span class="nx">app</span><span class="p">.</span><span class="nx">openURL</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span></span>
<span class="line-27"></span>
<span class="line-28">  <span class="nx">ui</span><span class="p">.</span><span class="nx">alert</span><span class="p">(</span><span class="s1">'Article Published'</span><span class="p">)</span></span>
<span class="line-29"><span class="p">}</span></span>
<span class="line-30"></span>
<span class="line-31"><span class="kd">function</span> <span class="nx">input_message</span><span class="p">()</span> <span class="p">{</span></span>
<span class="line-32">  <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span> <span class="p">{</span></span>
<span class="line-33">    <span class="nx">ui</span><span class="p">.</span><span class="nx">input</span><span class="p">(</span><span class="s1">'Commit Message'</span><span class="p">,</span> <span class="s1">'Add post'</span><span class="p">,</span> <span class="s1">'Enter the commit message'</span><span class="p">,</span> <span class="nx">resolve</span><span class="p">)</span></span>
<span class="line-34">  <span class="p">})</span></span>
<span class="line-35"><span class="p">}</span></span>
</code></pre>
<p>There are three things to note:</p>
<ol>
<li>you need to insert the information you collected in step 3 into the placeholders at the beginning of the script;</li>
<li>your path <strong>must</strong> include the trailing slash at the end; and</li>
<li>you can customise the actions that Working Copy performs by editing the <code>url</code> variable.<span class="connector">&#65279;<sup class="footnote-ref"><a href="#fn2" id="fnref2">2</a></sup></span></li>
</ol>
<p>At this point, you can either run the action (which you probably don’t want to do right now) or close the editor. You can always go back and edit an action by opening the action menu and tapping the ‘info’ mark (the ‘I’ in a circle) to the right of the particular action.</p>
<h2>Wrap-Up</h2>
<p>The steps are complete and now you can push a file to a remote repository with a single tap! Happy writing!&nbsp;&#10042;</p>
<section class="footnotes">
<ol>
<li id="fn1">
<p>That process originally involved Editorial but since it appears to no longer be under active development, I’ve switched to 1Writer. <a href="#fnref1" class="footnote-backref">↩</a></p>
</li>
<li id="fn2">
<p>You might, for example, prefer that the action didn’t actually push the change but merely committed it. <a href="#fnref2" class="footnote-backref">↩</a></p>
</li>
</ol>
</section>


  </article>
</section>

      <footer class="post">
        <p><small>This post was written by <a href="https://inqk.net/">Michael Camilleri</a>, a person on the Internet. If you have any comments, please reach out on <a href="https://micro.blog/pyrmont/">Micro.blog</a> or  <a href="https://twitter.com/pyrmont/">Twitter</a>. Original work placed in the public domain. All rights are disclaimed. <a href="/licence.html">Why?</a></small></p>
      </footer>
    </div>

    <script src="/assets/js/barefoot.min.js?v=2daa2b27c8b7174fdff1f614d852c8ece5845587"></script>
    <script>
      lf = new BareFoot();
      lf.init();
    </script>

  </body>
</html>

